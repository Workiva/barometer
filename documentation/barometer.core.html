<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>barometer.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Barometer</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>barometer</span></div></div></li><li class="depth-2 branch"><a href="barometer.aspects.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aspects</span></div></a></li><li class="depth-2 branch current"><a href="barometer.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="barometer.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="barometer.core.html#var-console-reporter"><div class="inner"><span>console-reporter</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-count"><div class="inner"><span>count</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-counter"><div class="inner"><span>counter</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-counters"><div class="inner"><span>counters</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-decrement"><div class="inner"><span>decrement</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-DEFAULT"><div class="inner"><span>DEFAULT</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-default-registry"><div class="inner"><span>default-registry</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-ensure-name"><div class="inner"><span>ensure-name</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-explain"><div class="inner"><span>explain</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-explanation"><div class="inner"><span>explanation</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-fifteen-minute-rate"><div class="inner"><span>fifteen-minute-rate</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-five-minute-rate"><div class="inner"><span>five-minute-rate</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-gauge"><div class="inner"><span>gauge</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-gauges"><div class="inner"><span>gauges</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-get-metric"><div class="inner"><span>get-metric</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-get-or-register"><div class="inner"><span>get-or-register</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-graphite-reporter"><div class="inner"><span>graphite-reporter</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-histogram"><div class="inner"><span>histogram</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-histograms"><div class="inner"><span>histograms</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-increment"><div class="inner"><span>increment</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-max"><div class="inner"><span>max</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-mean"><div class="inner"><span>mean</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-mean-rate"><div class="inner"><span>mean-rate</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-median"><div class="inner"><span>median</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-meter"><div class="inner"><span>meter</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-meters"><div class="inner"><span>meters</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-metric-filter"><div class="inner"><span>metric-filter</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-metrics"><div class="inner"><span>metrics</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-min"><div class="inner"><span>min</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-names"><div class="inner"><span>names</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-one-minute-rate"><div class="inner"><span>one-minute-rate</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-quantile"><div class="inner"><span>quantile</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-register"><div class="inner"><span>register</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-register-all"><div class="inner"><span>register-all</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-registry"><div class="inner"><span>registry</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-remove-matching"><div class="inner"><span>remove-matching</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-remove-metric"><div class="inner"><span>remove-metric</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-reservoir"><div class="inner"><span>reservoir</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-size"><div class="inner"><span>size</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-snapshot"><div class="inner"><span>snapshot</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-std-dev"><div class="inner"><span>std-dev</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-time"><div class="inner"><span>time</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-timer"><div class="inner"><span>timer</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-timers"><div class="inner"><span>timers</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-value"><div class="inner"><span>value</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-values"><div class="inner"><span>values</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-vomit-all-timers"><div class="inner"><span>vomit-all-timers</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-vomit-timer"><div class="inner"><span>vomit-timer</span></div></a></li><li class="depth-1"><a href="barometer.core.html#var-with-timer"><div class="inner"><span>with-timer</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">barometer.core</h1><div class="doc"><pre class="plaintext">This is a pretty thin wrapper of Coda Hale
(<a href="https://metrics.dropwizard.io)">https://metrics.dropwizard.io)</a>.  Unlike the metrics-clojure library
(<a href="https://github.com/metrics-clojure/metrics-clojure)">https://github.com/metrics-clojure/metrics-clojure)</a>, this doesn't
destroy your ability to program to interfaces common to the
different kinds of metrics.

The one major constraint this wrapper adds is that you must supply a
docstring when you create metrics. Do it. Don't cheat. We don't need
anonymous mysterious metrics out there. If it's worth recording,
it's worth saying what it is!!

On that note, you can get explanations for each metric with
(explanation) and (explain).</pre></div><div class="public anchor" id="var-console-reporter"><h3>console-reporter</h3><div class="usage"><code>(console-reporter registry)</code></div><div class="doc"><pre class="plaintext">A simple console reporter for debugging/dev purposes.
</pre></div></div><div class="public anchor" id="var-count"><h3>count</h3><div class="usage"><code>(count metric)</code></div><div class="doc"><pre class="plaintext">Returns the count recorded by this metric.
</pre></div></div><div class="public anchor" id="var-counter"><h3>counter</h3><div class="usage"><code>(counter explanation)</code></div><div class="doc"><pre class="plaintext">Creates a codahale counter [<a href="https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Counter.html">https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Counter.html</a>]
with the provided explanation string.</pre></div></div><div class="public anchor" id="var-counters"><h3>counters</h3><div class="usage"><code>(counters reg)</code><code>(counters reg filter)</code></div><div class="doc"><pre class="plaintext">Returns a map name-&gt;metric for all counters registered in this registry.
</pre></div></div><div class="public anchor" id="var-decrement"><h3>decrement</h3><div class="usage"><code>(decrement counter)</code><code>(decrement counter n)</code></div><div class="doc"><pre class="plaintext">Decrement a counter by 1 or by the amount specified.
</pre></div></div><div class="public anchor" id="var-DEFAULT"><h3>DEFAULT</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-default-registry"><h3>default-registry</h3><div class="usage"><code>(default-registry)</code></div><div class="doc"><pre class="plaintext">Default registry available for use by all consumers of barometer
</pre></div></div><div class="public anchor" id="var-ensure-name"><h3>ensure-name</h3><div class="usage"><code>(ensure-name name-repr)</code></div><div class="doc"><pre class="plaintext">Metric names can be specified as either a dotted string or a vector of strings.
</pre></div></div><div class="public anchor" id="var-explain"><h3>explain</h3><div class="usage"><code>(explain this)</code></div><div class="doc"><pre class="plaintext">Prints a string containing the documentation for this thing.
</pre></div></div><div class="public anchor" id="var-explanation"><h3>explanation</h3><div class="usage"><code>(explanation this)</code></div><div class="doc"><pre class="plaintext">Returns a string containing the documentation for this thing.
</pre></div></div><div class="public anchor" id="var-fifteen-minute-rate"><h3>fifteen-minute-rate</h3><div class="usage"><code>(fifteen-minute-rate metric)</code></div><div class="doc"><pre class="plaintext">Gives the frequency with which this metric was triggered in the last fifteen minutes.
</pre></div></div><div class="public anchor" id="var-five-minute-rate"><h3>five-minute-rate</h3><div class="usage"><code>(five-minute-rate metric)</code></div><div class="doc"><pre class="plaintext">Gives the frequency with which this metric was triggered in the last five minutes.
</pre></div></div><div class="public anchor" id="var-gauge"><h3>gauge</h3><div class="usage"><code>(gauge fn explanation)</code></div><div class="doc"><pre class="plaintext">Creates a codahale gauge [<a href="https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Gauge.html">https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Gauge.html</a>]
with the provided explanation string.</pre></div></div><div class="public anchor" id="var-gauges"><h3>gauges</h3><div class="usage"><code>(gauges reg)</code><code>(gauges reg filter)</code></div><div class="doc"><pre class="plaintext">Returns a map name-&gt;metric for all gauges registered in this registry.
</pre></div></div><div class="public anchor" id="var-get-metric"><h3>get-metric</h3><div class="usage"><code>(get-metric reg name)</code></div><div class="doc"><pre class="plaintext">Retrieves the metric registered under this name. Returns nil if none is found.
</pre></div></div><div class="public anchor" id="var-get-or-register"><h3>get-or-register</h3><h4 class="type">macro</h4><div class="usage"><code>(get-or-register reg name construction-form)</code></div><div class="doc"><pre class="plaintext">If a metric is already registered under this name, get-or-register simply returns that metric.
Otherwise, 'construction-form' is evaluated and its result (a metric, presumably) is registered.
Example: (def my-metric (get-or-register registry 'my-name (meter "A meter!")))</pre></div></div><div class="public anchor" id="var-graphite-reporter"><h3>graphite-reporter</h3><div class="usage"><code>(graphite-reporter registry graphite-url graphite-port)</code><code>(graphite-reporter registry graphite-url graphite-port prefix)</code></div><div class="doc"><pre class="plaintext">A reporter for streaming metrics to a graphite server. <a href="http://graphiteapp.org">http://graphiteapp.org</a>
</pre></div></div><div class="public anchor" id="var-histogram"><h3>histogram</h3><div class="usage"><code>(histogram reservoir explanation)</code></div><div class="doc"><pre class="plaintext">Creates a codahale histogram [<a href="https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Histogram.html">https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Histogram.html</a>
with the provided explanation string.</pre></div></div><div class="public anchor" id="var-histograms"><h3>histograms</h3><div class="usage"><code>(histograms reg)</code><code>(histograms reg filter)</code></div><div class="doc"><pre class="plaintext">Returns a map name-&gt;metric for all histograms registered in this registry.
</pre></div></div><div class="public anchor" id="var-increment"><h3>increment</h3><div class="usage"><code>(increment counter)</code><code>(increment counter n)</code></div><div class="doc"><pre class="plaintext">Increment a counter by 1 or by the amount specified.
</pre></div></div><div class="public anchor" id="var-max"><h3>max</h3><div class="usage"><code>(max o)</code></div><div class="doc"><pre class="plaintext">Gives the maximum value captured by this metric/snapshot.
</pre></div></div><div class="public anchor" id="var-mean"><h3>mean</h3><div class="usage"><code>(mean o)</code></div><div class="doc"><pre class="plaintext">Gives the mean value recorded by this metric/snapshot.
</pre></div></div><div class="public anchor" id="var-mean-rate"><h3>mean-rate</h3><div class="usage"><code>(mean-rate metric)</code></div><div class="doc"><pre class="plaintext">Gives the mean frequency with which this metric has been triggered.
</pre></div></div><div class="public anchor" id="var-median"><h3>median</h3><div class="usage"><code>(median o)</code></div><div class="doc"><pre class="plaintext">Gives the median value recorded by this metric/snapshot.
</pre></div></div><div class="public anchor" id="var-meter"><h3>meter</h3><div class="usage"><code>(meter explanation)</code><code>(meter clock explanation)</code></div><div class="doc"><pre class="plaintext">Creates a codahale meter [<a href="https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Meter.html">https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Meter.html</a>]
with the provided explanation string.</pre></div></div><div class="public anchor" id="var-meters"><h3>meters</h3><div class="usage"><code>(meters reg)</code><code>(meters reg filter)</code></div><div class="doc"><pre class="plaintext">Returns a map name-&gt;metric for all meters registered in this registry.
</pre></div></div><div class="public anchor" id="var-metric-filter"><h3>metric-filter</h3><div class="usage"><code>(metric-filter f)</code></div><div class="doc"><pre class="plaintext">Pass in a function that takes arguments name-of-metric and metric. It should
return a truthy value if the filter matches.</pre></div></div><div class="public anchor" id="var-metrics"><h3>metrics</h3><div class="usage"><code>(metrics ms)</code></div><div class="doc"><pre class="plaintext">Returns a map name-&gt;metric for all metrics contained by this metric set.
</pre></div></div><div class="public anchor" id="var-min"><h3>min</h3><div class="usage"><code>(min o)</code></div><div class="doc"><pre class="plaintext">Gives the minimum value captured by this metric/snapshot.
</pre></div></div><div class="public anchor" id="var-names"><h3>names</h3><div class="usage"><code>(names reg)</code></div><div class="doc"><pre class="plaintext">Returns a set containing all the names registered in this registry.
</pre></div></div><div class="public anchor" id="var-one-minute-rate"><h3>one-minute-rate</h3><div class="usage"><code>(one-minute-rate metric)</code></div><div class="doc"><pre class="plaintext">Gives the frequency with which this metric was triggered in the last five minutes.
</pre></div></div><div class="public anchor" id="var-quantile"><h3>quantile</h3><div class="usage"><code>(quantile o q)</code></div><div class="doc"><pre class="plaintext">Gives the value recorded by this metric/snapshot in the specified quantile.
</pre></div></div><div class="public anchor" id="var-register"><h3>register</h3><div class="usage"><code>(register reg name metric)</code></div><div class="doc"><pre class="plaintext">Registers the given metric to the given name in this registry. If a metric is already registered under this name, it is replaced and a warning is logged.
</pre></div></div><div class="public anchor" id="var-register-all"><h3>register-all</h3><div class="usage"><code>(register-all reg name-&gt;metric)</code><code>(register-all reg prefix name-&gt;metric)</code></div><div class="doc"><pre class="plaintext">Registers to the given names the corresponding metrics. If a metric is already registered under this name, it is replaced and a warning is logged.
</pre></div></div><div class="public anchor" id="var-registry"><h3>registry</h3><div class="usage"><code>(registry explanation)</code><code>(registry)</code></div><div class="doc"><pre class="plaintext">The explanation is optional.
</pre></div></div><div class="public anchor" id="var-remove-matching"><h3>remove-matching</h3><div class="usage"><code>(remove-matching reg filter)</code></div><div class="doc"><pre class="plaintext">Removes from this registry any metric that matches the given filter.
</pre></div></div><div class="public anchor" id="var-remove-metric"><h3>remove-metric</h3><div class="usage"><code>(remove-metric reg name)</code></div><div class="doc"><pre class="plaintext">Removes from this registry any metric registered under the given name.
</pre></div></div><div class="public anchor" id="var-reservoir"><h3>reservoir</h3><div class="usage"><code>(reservoir)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-size"><h3>size</h3><div class="usage"><code>(size o)</code></div><div class="doc"><pre class="plaintext">Gives the number of values recorded by this metric/snapshot.
</pre></div></div><div class="public anchor" id="var-snapshot"><h3>snapshot</h3><div class="usage"><code>(snapshot metric)</code></div><div class="doc"><pre class="plaintext">Gives an instantaneous snapshot of the statistical properties of the metric.
</pre></div></div><div class="public anchor" id="var-std-dev"><h3>std-dev</h3><div class="usage"><code>(std-dev o)</code></div><div class="doc"><pre class="plaintext">Gives the standard deviation of the value recorded by this metric/snapshot.
</pre></div></div><div class="public anchor" id="var-time"><h3>time</h3><div class="usage"><code>(time metric fn)</code></div><div class="doc"><pre class="plaintext">Runs the fn, returns its return value.
</pre></div></div><div class="public anchor" id="var-timer"><h3>timer</h3><div class="usage"><code>(timer explanation)</code><code>(timer reservoir explanation)</code><code>(timer reservoir clock explanation)</code></div><div class="doc"><pre class="plaintext">Creates a codahale timer [<a href="https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Timer.html">https://metrics.dropwizard.io/3.2.0/apidocs/com/codahale/metrics/Timer.html</a>]
with the provided explanation string.</pre></div></div><div class="public anchor" id="var-timers"><h3>timers</h3><div class="usage"><code>(timers reg)</code><code>(timers reg filter)</code></div><div class="doc"><pre class="plaintext">Returns a map name-&gt;metric for all timers registered in this registry.
</pre></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update metric)</code><code>(update metric value)</code></div><div class="doc"><pre class="plaintext">Updates with number of occurrences, or latest value, or whatever it makes sense to tick/mark/update this metric with.
</pre></div></div><div class="public anchor" id="var-value"><h3>value</h3><div class="usage"><code>(value metric)</code></div><div class="doc"><pre class="plaintext">For metrics that record a single value, this returns it.
</pre></div></div><div class="public anchor" id="var-values"><h3>values</h3><div class="usage"><code>(values o)</code></div><div class="doc"><pre class="plaintext">Gives an array of all values captured by this metric/snapshot.
</pre></div></div><div class="public anchor" id="var-vomit-all-timers"><h3>vomit-all-timers</h3><div class="usage"><code>(vomit-all-timers registry)</code></div><div class="doc"><pre class="plaintext">Named in accordance with the sense that this is not how things should be done
if we happened to take the time to decide how to do such things instead of simply
doing them.

Returns a nested map of stats reported by all timers registered in the registry.</pre></div></div><div class="public anchor" id="var-vomit-timer"><h3>vomit-timer</h3><div class="usage"><code>(vomit-timer timer)</code></div><div class="doc"><pre class="plaintext">Named in accordance with the sense that this is not how things should be done
if we happened to take the time to decide how to do such things instead of simply
doing them.

Returns a map of stats reported by the timer.</pre></div></div><div class="public anchor" id="var-with-timer"><h3>with-timer</h3><h4 class="type">macro</h4><div class="usage"><code>(with-timer timer &amp; body)</code></div><div class="doc"><pre class="plaintext">Times the execution of the body, even if an exception is thrown.
</pre></div></div></div></body></html>